(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{109:function(e,t,n){},114:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},154:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},215:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(61),s=n.n(c),i=(n(151),n(140)),l=n(21),o=(n(152),n(62)),j=n.n(o),u=n(77),d=n(15),b=(n(154),n(49)),h=(n(155),n(131),n(247),n(246),{apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"});b.a.initializeApp(h);var O=b.a.auth(),x=b.a.firestore(),f=b.a.storage(),m=(b.a.analytics(),n(9)),p=n(24),g=n.p+"static/media/logo.8bc7b652.png",v=n(2);function C(e){var t=e.setUser,n=Object(a.useState)(),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(),l=Object(d.a)(i,2),o=l[0],b=l[1],h=Object(a.useState)(null),x=Object(d.a)(h,2),f=x[0],C=x[1],y=function(){var e=Object(u.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O.signInWithEmailAndPassword(c,o).then((function(e){t(e)})).catch((function(e){C(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"text-center login-wrapper",children:Object(v.jsxs)(m.a,{className:"form-signin",onSubmit:y,children:[Object(v.jsx)("img",{className:"mb-4",src:g,alt:"",width:"120"}),Object(v.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(v.jsxs)(m.a.Group,{controlId:"inputEmail",children:[Object(v.jsx)(m.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(v.jsx)(m.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return s(e.target.value)}}),Object(v.jsx)(m.a.Text,{className:"text-danger",children:f})]}),Object(v.jsxs)(m.a.Group,{controlId:"inputPassword",children:[Object(v.jsx)(m.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(v.jsx)(m.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return b(e.target.value)}})]}),Object(v.jsx)(p.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})}var y=n(32),w=Object(a.createContext)();var S=n(82),L=n(20),N=n(16);function k(e){var t=e.updatePlot,n=e.setDrawSettings;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(m.a,{children:[Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:function(e){return n({delta:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:function(e){return n({e_per_mm:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:function(e){return n({z:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Float"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:function(e){return n({f:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:function(e){return n({print_size_mm:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:function(e){return n({table_size_mm:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:function(e){return n({offset_x:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:function(e){return n({offset_y:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:function(e){return n({tool:e.target.value})}})})]})]}),Object(v.jsx)(p.a,{onClick:function(){return t()},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}var E="https://api.chocolatefiesta.ru",z=n(133),_=n.n(z),F=n(80),M=n(69);function T(e){return Object(a.useEffect)((function(){}),[e.plotData,e.fetchError]),e.fetchError?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(M.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(_.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(F.a,{animation:"border",role:"status",children:Object(v.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var G=n(29);function D(e,t){return Object(y.a)(Object(y.a)({},e),t)}function P(e){return function(e){return f.ref("user").child(e).child("drawing.gcode")}(e).getDownloadURL().catch((function(e){console.log(e)}))}function V(){var e=Object(a.useContext)(w).user.user.uid,t=Object(a.useState)("#"),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(null),i=Object(d.a)(s,2),l=i[0],o=i[1],j=Object(a.useState)(null),u=Object(d.a)(j,2),b=u[0],h=u[1],O=Object(a.useReducer)(D,{}),x=Object(d.a)(O,2),f=x[0],m=x[1];function g(e,t){return h(null),h(null),o(null),fetch(E+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?h('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):h("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((function(e){o(JSON.parse(e))})).catch((function(e){G.a(new Error(e))}))}return Object(a.useEffect)((function(){var t=!0;return P(e).then((function(e){t&&c(e)})),g(e,{}),function(){return t=!1}}),[e]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(S.a,{fluid:"xl",children:[Object(v.jsxs)(L.a,{children:[Object(v.jsx)(N.a,{sm:8,children:Object(v.jsx)(T,{fetchError:b,plotData:l})}),Object(v.jsx)(N.a,{sm:4,children:Object(v.jsx)(k,{updatePlot:function(){g(e,f),P(e).then((function(e){return c(e)}))},setDrawSettings:m})})]}),Object(v.jsx)(L.a,{children:Object(v.jsxs)(N.a,{children:[Object(v.jsx)(p.a,{as:"a",target:"_blank",href:r,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(v.jsx)(p.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(v.jsx)(p.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var I=n(53),U=n(257),B=n(35),R=n(144),X=n(259),Y=n(253),J=Object(a.createContext)();n(164);function W(e){var t=e.model,n=(Object(R.a)(e,["model"]),Object(a.useContext)(J).setCurrentModel);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(X.a,{className:"model-card",onClick:function(){return n(t)},role:"button",children:[Object(v.jsx)(X.a.Img,{className:"model-card-image",variant:"top",src:function(e){var t;return e.some((function(e){return t=e.image.src,e.is_thumbnail})),t}(t.images)}),Object(v.jsxs)(X.a.Body,{children:[Object(v.jsx)(X.a.Title,{children:t.name}),Object(v.jsx)(X.a.Text,{children:Object(v.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}})}),Object(v.jsxs)(Y.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(v.jsxs)(Y.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(v.jsx)(Y.a,{variant:"secondary",children:t.piece_size})," ",Object(v.jsx)(Y.a,{variant:"secondary",children:t.colors_num})," "]})]},t.id)})}n(165);function H(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(d.a)(c,2),i=s[0],l=s[1],o=Object(a.useState)(""),b=Object(d.a)(o,2),h=b[0],O=b[1],f=Object(a.useState)(null),p=Object(d.a)(f,2),g=p[0],C=p[1],w=function(){var e=Object(u.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("storage/model-library/public").orderBy("name").get();case 2:return t=e.sent,e.next=5,x.collection("storage/model-library/tags").orderBy("name").get();case 5:n=e.sent,t.docs.forEach((function(e){r((function(t){var n=Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id});return[].concat(Object(I.a)(t),[n])}))})),n.docs.forEach((function(e){l((function(t){var n=Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id});return[].concat(Object(I.a)(t),[n])}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){w()}),[]),Object(v.jsx)("div",{className:"model-list-wrapper",children:Object(v.jsxs)(S.a,{children:[Object(v.jsx)(L.a,{className:"model-tags-row",children:Object(v.jsx)(U.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(v.jsxs)(B.a,{variant:"pills",children:[Object(v.jsx)(B.a.Item,{children:Object(v.jsx)(B.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(v.jsx)(B.a.Item,{children:Object(v.jsx)(B.a.Link,{eventKey:"0",onClick:function(e){return C(null)},children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),i&&i.map((function(e,t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(B.a.Item,{children:Object(v.jsx)(B.a.Link,{eventKey:e.id,onClick:function(t){return C(e.id)},children:e.name})})})}))]})})}),Object(v.jsx)(m.a,{children:Object(v.jsx)(m.a.Row,{children:Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){return O(e.target.value)}})})})}),Object(v.jsx)(L.a,{children:n&&function(){var e=Object(I.a)(n);return g&&(e=e.filter((function(e){var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(g)}))),e.filter((function(e){return e.name.toUpperCase().includes(h.toUpperCase())}))}().map((function(e,t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(W,{model:e},e.id)})}))})]})})}var K=n(256);function A(){var e=Object(a.useContext)(J),t=e.currentModel,n=e.cleanCurrentModel;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(p.a,{variant:"link",onClick:n,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(v.jsxs)(L.a,{children:[Object(v.jsx)(N.a,{sm:5,children:Object(v.jsx)(K.a,{children:t.images.map((function(e){return Object(v.jsx)(K.a.Item,{children:Object(v.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})}))})}),Object(v.jsxs)(N.a,{sm:7,children:[Object(v.jsx)("h2",{children:t.name}),Object(v.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}}),Object(v.jsxs)("h4",{children:[Object(v.jsxs)(Y.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(v.jsxs)(Y.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(v.jsx)(Y.a,{variant:"secondary",children:t.piece_size})," ",Object(v.jsx)(Y.a,{variant:"secondary",children:t.colors_num})," "]}),Object(v.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(v.jsx)("ul",{children:t.files.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(p.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})}))})]})]})]})}n(166);function Z(){var e=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1];return{currentModel:n,setCurrentModel:r,cleanCurrentModel:function(){r(null)}}}(),t=e.currentModel,n=e.setCurrentModel,r=e.cleanCurrentModel;return t?Object(v.jsx)("div",{className:"wrapper",children:Object(v.jsx)(J.Provider,{value:{currentModel:t,setCurrentModel:n,cleanCurrentModel:r},children:Object(v.jsx)(S.a,{fluid:"xl",children:Object(v.jsx)(A,{})})})}):Object(v.jsx)("div",{className:"wrapper",children:Object(v.jsx)(J.Provider,{value:{currentModel:t,setCurrentModel:n,cleanCurrentModel:r},children:Object(v.jsxs)(S.a,{fluid:"xl",children:[Object(v.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(v.jsx)(H,{})]})})})}var q=n(41),Q=n(141),$=Object(Q.a)({wrapper:{padding:[15]}});function ee(){var e=$(),t=Object(a.useContext)(w),n=t.user,r=t.removeUser;return Object(v.jsx)("div",{className:e.wrapper,children:Object(v.jsxs)(q.a,{className:"justify-content-between",expand:"lg",children:[Object(v.jsx)(q.a.Brand,{href:"/",children:"Chocolate Fiesta Cloud \u03b2"}),Object(v.jsx)(q.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsxs)(q.a.Collapse,{id:"basic-navbar-nav",children:[Object(v.jsxs)(B.a,{className:"mr-auto",children:[Object(v.jsx)(B.a.Link,{href:"/library",children:"Models Library"}),Object(v.jsx)(B.a.Link,{href:"/draw-print",children:"Drawing Print"}),Object(v.jsx)(B.a.Link,{href:"/stl-generator",children:"3D Text Generator"})]}),Object(v.jsxs)(B.a,{className:"ml-auto",children:[Object(v.jsxs)(B.a.Link,{disabled:!0,children:["You are logged in as ",n.user.email]}),Object(v.jsx)(B.a.Link,{onClick:r,children:"Log out"})]})]})]})})}n(169);function te(){return Object(v.jsx)("div",{className:"dash-wrapper",children:Object(v.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}var ne=r.a.createContext(),ae=function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),o=l[0],j=l[1],u=Object(a.useRef)(null),b=Object(a.useRef)(null),h=Object(a.useState)([]),O=Object(d.a)(h,2),x=O[0],f=O[1],m=Object(a.useState)([]),p=Object(d.a)(m,2),g=p[0],C=p[1],y=Object(a.useState)([]),w=Object(d.a)(y,2),S=w[0],L=w[1],N=function(e){if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type)return{offsetX:e.offsetX,offsetY:e.offsetY};if("touchstart"===e.type||"touchmove"===e.type){var t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(v.jsx)(ne.Provider,{value:{canvasRef:u,contextRef:b,x:x,y:g,stops:S,isPrepared:c,prepareCanvas:function(){if(!c){var e=u.current,t=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*t,e.height=2*t,e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px");var n=e.getContext("2d");n.scale(2,2),n.lineCap="round",n.strokeStyle="brown",n.lineWidth=14,b.current=n,s(!0)}},startDrawing:function(e){var t=e.nativeEvent,n=N(t),a=n.offsetX,r=n.offsetY;b.current.beginPath(),b.current.moveTo(a,r),j(!0)},finishDrawing:function(){b.current.closePath(),j(!1),L([].concat(Object(I.a)(S),[x.length-1]))},clearCanvas:function(){var e=u.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),f([]),C([]),L([])},draw:function(e){var t=e.nativeEvent;if(o){var n=N(t),a=n.offsetX,r=n.offsetY;b.current.lineTo(a,r),b.current.stroke(),f([].concat(Object(I.a)(x),[a])),C([].concat(Object(I.a)(g),[r]))}}},children:t})},re=function(){return Object(a.useContext)(ne)};n(170);function ce(){var e=re(),t=e.canvasRef,n=e.prepareCanvas,r=e.startDrawing,c=e.finishDrawing,s=e.draw;return Object(a.useEffect)(n,[n]),Object(v.jsx)("canvas",{onMouseDown:r,onMouseUp:c,onMouseMove:s,onTouchStart:r,onTouchEnd:c,onTouchMove:s,ref:t})}n(109);function se(){var e=Object(a.useContext)(w).user,t=re(),n=t.x,r=t.y,c=t.stops,s=Object(a.useState)(!1),i=Object(d.a)(s,2),l=i[0],o=i[1];function j(){return(t=e.user.uid,x.collection("user-drawing").doc(t)).set({x:n,y:r,stops:c});var t}function u(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),r=t[0],c=t[1];Object(a.useEffect)((function(){r&&j().then((function(){c(!1),o(!0)}))}),[r]);return Object(v.jsx)(p.a,{disabled:r||l||0===n.length,className:"control-button",size:"lg",variant:"success",onClick:r?null:function(){c(!0)},children:r?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":l?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(a.useEffect)((function(){o(!1)}),[n]),Object(v.jsx)(u,{})}function ie(){var e=re(),t=e.x,n=e.clearCanvas;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"controls-wrapper",children:Object(v.jsx)(q.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(v.jsxs)(B.a,{children:[Object(v.jsx)(p.a,{onClick:n,disabled:0===t.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(v.jsx)(se,{})]})})})})}var le=n(143);n(215);function oe(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{children:Object(v.jsxs)(q.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(v.jsx)(q.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(v.jsx)(q.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsx)(B.a,{className:"ml-auto",children:Object(v.jsx)(B.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var je=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"draw-app-wrapper",children:Object(v.jsx)(le.a,Object(y.a)(Object(y.a)({},h),{},{firebase:b.a,children:Object(v.jsxs)(ae,{children:[Object(v.jsx)(oe,{}),Object(v.jsx)(ce,{}),Object(v.jsx)(ie,{})]})}))})})};function ue(e){var t=e.updateSTL,n=e.setStlSettings,a=[{value:"Pacifico",title:"Pacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold"},{value:"Liberation Serif:style=Bold",title:"Serif Bold"}];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(m.a,{children:[Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Text"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:function(e){return n({text:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Heigth, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:function(e){return n({depth:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Width, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:function(e){return n({width:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:function(e){return n({foundation_depth:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:function(e){return n({foundation_offset:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:function(e){return n({foundation_joiner_height:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:function(e){return n({text_spacing:e.target.value})}})})]}),Object(v.jsxs)(m.a.Group,{as:L.a,children:[Object(v.jsx)(m.a.Label,{column:!0,children:"Font"}),Object(v.jsx)(N.a,{children:Object(v.jsx)(m.a.Control,{size:"sm",as:"select",defaultValue:a[0].value,onChange:function(e){return n({font:e.target.value})},children:a.map((function(e){return Object(v.jsx)("option",{value:e.value,children:e.title})}))})})]})]}),Object(v.jsx)(p.a,{onClick:function(){return t()},children:"Generate"})]})}n(114);var de=n(139);function be(e){return Object(a.useEffect)((function(){}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(M.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(v.jsx)(F.a,{animation:"border",role:"status",children:Object(v.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(de.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function he(e,t){return Object(y.a)(Object(y.a)({},e),t)}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return fetch(e,t).then((function(a){if(a.ok)return a.json();if(n>0)return Oe(e,t,n-1);throw new Error(a)})).catch((function(a){if(n>0)return Oe(e,t,n-1);throw new Error(a)}))}function xe(){var e=Object(a.useContext)(w).user.user.uid,t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useReducer)(he,{}),i=Object(d.a)(s,2),l=i[0],o=i[1],j=Object(a.useState)(!1),u=Object(d.a)(j,2),b=u[0],h=u[1];function O(e,t){return c(""),h(!1),Oe(E+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e?c(e.url):(h(!0),G.a(new Error(e)))})).catch((function(e){h(!0),G.a(new Error(e))}))}return Object(a.useEffect)((function(){var e=!0;return O(0,{}).then((function(t){e&&null!=t&&c(t.url)})),function(){return e=!1}}),[e]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(S.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(v.jsxs)(L.a,{children:[Object(v.jsx)(N.a,{sm:7,children:Object(v.jsx)(be,{fetchStlError:b,stlUrl:r})}),Object(v.jsx)(N.a,{sm:5,children:Object(v.jsx)(ue,{updateSTL:function(){O(0,l)},setStlSettings:o})})]}),Object(v.jsx)(L.a,{children:Object(v.jsxs)(N.a,{children:[Object(v.jsx)(p.a,{as:"a",target:"_blank",href:r,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(v.jsx)(p.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var fe=function(){var e=function(){var e=Object(a.useState)(function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null}()),t=Object(d.a)(e,2),n=t[0],r=t[1],c=function(e){localStorage.setItem("user",JSON.stringify(e)),r(e)};return{setUser:c,user:n,removeUser:function(){c(null)}}}(),t=e.user,n=e.setUser,r=e.removeUser;return t?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(w.Provider,{value:{user:t,setUser:n,removeUser:r},children:Object(v.jsx)(i.a,{children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{exact:!0,path:"/draw",children:Object(v.jsx)(je,{})}),Object(v.jsxs)(l.a,{path:"/",children:[Object(v.jsx)(ee,{}),Object(v.jsx)(l.a,{exact:!0,path:"/",children:Object(v.jsx)(V,{})}),Object(v.jsx)(l.a,{path:"/draw-print",children:Object(v.jsx)(V,{})}),Object(v.jsx)(l.a,{path:"/library",children:Object(v.jsx)(Z,{})}),Object(v.jsx)(l.a,{path:"/slicer",children:Object(v.jsx)(te,{})}),Object(v.jsx)(l.a,{path:"/stl-generator",children:Object(v.jsx)(xe,{})})]})]})})})}):Object(v.jsx)(C,{setUser:n})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},pe=(n(244),n(255)),ge=n(142);pe.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new ge.a.BrowserTracing],tracesSampleRate:1}),s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(fe,{})}),document.getElementById("root")),me()}},[[245,1,2]]]);
//# sourceMappingURL=main.07cfa106.chunk.js.map