(this.webpackJsonpcloud=this.webpackJsonpcloud||[]).push([[0],{109:function(e,t,n){},114:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},156:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},217:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(62),i=n.n(s),l=(n(153),n(142)),o=n(22),j=(n(154),n(63)),u=n.n(j),d=n(78),b=n(15),h=(n(156),n(51)),O=(n(157),n(131),n(251),n(250),{apiKey:"AIzaSyDsEXIV0OTzWuRX4XBiVB4a-3w4bP_fnCs",authDomain:"chocolate-fiesta-cloud.firebaseapp.com",projectId:"chocolate-fiesta-cloud",storageBucket:"chocolate-fiesta-cloud.appspot.com",messagingSenderId:"419100703725",appId:"1:419100703725:web:42a642a456befea15045e4",measurementId:"G-FRZNRK641V"});h.a.initializeApp(O);var x=h.a.auth(),f=h.a.firestore(),m=h.a.storage(),p=(h.a.analytics(),n(8)),g=n(25),v=n.p+"static/media/logo.8bc7b652.png";function C(e){var t=e.setUser,n=Object(r.useState)(),c=Object(b.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(),o=Object(b.a)(l,2),j=o[0],h=o[1],O=Object(r.useState)(null),f=Object(b.a)(O,2),m=f[0],C=f[1],y=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x.signInWithEmailAndPassword(s,j).then((function(e){t(e)})).catch((function(e){C(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"text-center login-wrapper",children:Object(a.jsxs)(p.a,{className:"form-signin",onSubmit:y,children:[Object(a.jsx)("img",{className:"mb-4",src:v,alt:"",width:"120"}),Object(a.jsx)("h1",{className:"h3 mb-3 font-weight-normal",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(a.jsxs)(p.a.Group,{controlId:"inputEmail",children:[Object(a.jsx)(p.a.Label,{className:"sr-only",children:"Email \u0430\u0434\u0440\u0435\u0441"}),Object(a.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return i(e.target.value)}}),Object(a.jsx)(p.a.Text,{className:"text-danger",children:m})]}),Object(a.jsxs)(p.a.Group,{controlId:"inputPassword",children:[Object(a.jsx)(p.a.Label,{className:"sr-only",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)(p.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(a.jsx)(g.a,{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})}var y=n(33),w=Object(r.createContext)();var S=n(83),L=n(21),N=n(16);function k(e){var t=e.updatePlot,n=e.setDrawSettings;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(p.a,{children:[Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0443\u0437\u043b\u0430\u043c\u0438, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2.0",onChange:function(e){return n({delta:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0437\u0438\u044f, \u0435\u0434./\u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.03",onChange:function(e){return n({e_per_mm:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Z, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"0.01",defaultValue:"0.25",onChange:function(e){return n({z:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Float"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2400",onChange:function(e){return n({f:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u0435\u0447\u0430\u0442\u0438, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"120",onChange:function(e){return n({print_size_mm:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0441\u0442\u043e\u043b\u0430, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"200",onChange:function(e){return n({table_size_mm:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 X, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:function(e){return n({offset_x:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u041e\u0444\u0444\u0441\u0435\u0442 Y, \u043c\u043c"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"0",onChange:function(e){return n({offset_y:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"\u042d\u043a\u0441\u0442\u0440\u0443\u0434\u0435\u0440"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",min:"0",max:"1",defaultValue:"0",onChange:function(e){return n({tool:e.target.value})}})})]})]}),Object(a.jsx)(g.a,{onClick:function(){return t()},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]})}var E="https://api.chocolatefiesta.ru",z=n(134),_=n.n(z),F=n(81),M=n(70);function T(e){return Object(r.useEffect)((function(){}),[e.plotData,e.fetchError]),e.fetchError?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M.a,{variant:"danger",children:e.fetchError})}):e.plotData?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(_.a,{data:e.plotData.data,layout:{showlegend:!1,xaxis:{scaleanchor:"y",scaleratio:1},height:.6*window.innerHeight}})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(F.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})})}var G=n(30);function D(e,t){return Object(y.a)(Object(y.a)({},e),t)}function P(e){return function(e){return m.ref("user").child(e).child("drawing.gcode")}(e).getDownloadURL().catch((function(e){console.log(e)}))}function V(){var e=Object(r.useContext)(w).user.user.uid,t=Object(r.useState)("#"),n=Object(b.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(null),l=Object(b.a)(i,2),o=l[0],j=l[1],u=Object(r.useState)(null),d=Object(b.a)(u,2),h=d[0],O=d[1],x=Object(r.useReducer)(D,{}),f=Object(b.a)(x,2),m=f[0],p=f[1];function v(e,t){return O(null),O(null),j(null),fetch(E+"/api/user/"+e+"/drawing/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(console.log(e),201===e.status||200===e.status)return e.json();throw 204===e.status?O('\u0420\u0438\u0441\u0443\u043d\u043e\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 "\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435" \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0440\u0438\u0441\u0443\u043d\u043e\u043a \u0432 \u043f\u0435\u0447\u0430\u0442\u044c'):O("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),new Error(e)})).then((function(e){j(JSON.parse(e))})).catch((function(e){G.a(new Error(e))}))}return Object(r.useEffect)((function(){var t=!0;return P(e).then((function(e){t&&s(e)})),v(e,{}),function(){return t=!1}}),[e]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,{fluid:"xl",children:[Object(a.jsxs)(L.a,{children:[Object(a.jsx)(N.a,{sm:8,children:Object(a.jsx)(T,{fetchError:h,plotData:o})}),Object(a.jsx)(N.a,{sm:4,children:Object(a.jsx)(k,{updatePlot:function(){v(e,m),P(e).then((function(e){return s(e)}))},setDrawSettings:p})})]}),Object(a.jsx)(L.a,{children:Object(a.jsxs)(N.a,{children:[Object(a.jsx)(g.a,{as:"a",target:"_blank",href:c,className:"control-button",size:"lg",variant:"primary",download:!0,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c GCODE"}),Object(a.jsx)(g.a,{as:"a",target:"_blank",href:"/draw",className:"control-button",size:"lg",variant:"secondary",children:"\u0420\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(a.jsx)(g.a,{disabled:!0,className:"control-button",variant:"secondary",size:"lg",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})]})})]})})}var I=n(44),U=n(261),B=n(36),R=n(138),X=n(263),Y=n(257),J=Object(r.createContext)();n(165);function W(e){var t=e.model,n=(Object(R.a)(e,["model"]),Object(r.useContext)(J).setCurrentModel);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(X.a,{className:"model-card",onClick:function(){return n(t)},role:"button",children:[Object(a.jsx)(X.a.Img,{className:"model-card-image",variant:"top",src:function(e){var t;return e.some((function(e){return t=e.image.src,e.is_thumbnail})),t}(t.images)}),Object(a.jsxs)(X.a.Body,{children:[Object(a.jsx)(X.a.Title,{children:t.name}),Object(a.jsx)(X.a.Text,{children:Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}})}),Object(a.jsxs)(Y.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(a.jsxs)(Y.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(a.jsx)(Y.a,{variant:"secondary",children:t.piece_size})," ",Object(a.jsx)(Y.a,{variant:"secondary",children:t.colors_num})," "]})]},t.id)})}n(166);function H(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),i=Object(b.a)(s,2),l=i[0],o=i[1],j=Object(r.useState)(""),h=Object(b.a)(j,2),O=h[0],x=h[1],m=Object(r.useState)(null),g=Object(b.a)(m,2),v=g[0],C=g[1],w=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("storage/model-library/public").orderBy("name").get();case 2:return t=e.sent,e.next=5,f.collection("storage/model-library/tags").orderBy("name").get();case 5:n=e.sent,t.docs.forEach((function(e){c((function(t){var n=Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id});return[].concat(Object(I.a)(t),[n])}))})),n.docs.forEach((function(e){o((function(t){var n=Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id});return[].concat(Object(I.a)(t),[n])}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){w()}),[]),Object(a.jsx)("div",{className:"model-list-wrapper",children:Object(a.jsxs)(S.a,{children:[Object(a.jsx)(L.a,{className:"model-tags-row",children:Object(a.jsx)(U.a.Container,{id:"model-tags-tabs",defaultActiveKey:"0",children:Object(a.jsxs)(B.a,{variant:"pills",children:[Object(a.jsx)(B.a.Item,{children:Object(a.jsx)(B.a.Link,{disabled:!0,eventKey:"-1",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),Object(a.jsx)(B.a.Item,{children:Object(a.jsx)(B.a.Link,{eventKey:"0",onClick:function(e){return C(null)},children:"\u0412\u0441\u0435 \u043c\u043e\u0434\u0435\u043b\u0438"})}),l&&l.map((function(e,t){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(B.a.Item,{children:Object(a.jsx)(B.a.Link,{eventKey:e.id,onClick:function(t){return C(e.id)},children:e.name})})})}))]})})}),Object(a.jsx)(p.a,{children:Object(a.jsx)(p.a.Row,{children:Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){return x(e.target.value)}})})})}),Object(a.jsx)(L.a,{children:n&&function(){var e=Object(I.a)(n);return v&&(e=e.filter((function(e){var t;return null===(t=e.tag_ids)||void 0===t?void 0:t.includes(v)}))),e.filter((function(e){return e.name.toUpperCase().includes(O.toUpperCase())}))}().map((function(e,t){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(W,{model:e},e.id)})}))})]})})}var K=n(260);function A(){var e=Object(r.useContext)(J),t=e.currentModel,n=e.cleanCurrentModel;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{variant:"link",onClick:n,children:"\u27f5 \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"}),Object(a.jsxs)(L.a,{children:[Object(a.jsx)(N.a,{sm:5,children:Object(a.jsx)(K.a,{children:t.images.map((function(e){return Object(a.jsx)(K.a.Item,{children:Object(a.jsx)("img",{className:"d-block w-100",src:e.image.src,alt:"First slide"})})}))})}),Object(a.jsxs)(N.a,{sm:7,children:[Object(a.jsx)("h2",{children:t.name}),Object(a.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}}),Object(a.jsxs)("h4",{children:[Object(a.jsxs)(Y.a,{variant:"secondary",children:[t.print_time," \u043c\u0438\u043d\u0443\u0442"]})," ",Object(a.jsxs)(Y.a,{variant:"secondary",children:[t.pieces_num," \u0448\u0442."]})," ",Object(a.jsx)(Y.a,{variant:"secondary",children:t.piece_size})," ",Object(a.jsx)(Y.a,{variant:"secondary",children:t.colors_num})," "]}),Object(a.jsx)("h4",{children:"\u0424\u0430\u0439\u043b\u044b"}),Object(a.jsx)("ul",{children:t.files.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(g.a,{as:"a",target:"_blank",variant:"link",href:e.file.src,download:e.file.title,children:e.name||e.file.title})})}))})]})]})]})}n(167);function Z(){var e=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1];return{currentModel:n,setCurrentModel:a,cleanCurrentModel:function(){a(null)}}}(),t=e.currentModel,n=e.setCurrentModel,c=e.cleanCurrentModel;return t?Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)(J.Provider,{value:{currentModel:t,setCurrentModel:n,cleanCurrentModel:c},children:Object(a.jsx)(S.a,{fluid:"xl",children:Object(a.jsx)(A,{})})})}):Object(a.jsx)("div",{className:"wrapper",children:Object(a.jsx)(J.Provider,{value:{currentModel:t,setCurrentModel:n,cleanCurrentModel:c},children:Object(a.jsxs)(S.a,{fluid:"xl",children:[Object(a.jsx)("h2",{children:"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043c\u043e\u0434\u0435\u043b\u0435\u0439"}),Object(a.jsx)(H,{})]})})})}var q=n(42),Q=n(144),$=Object(Q.a)({wrapper:{padding:[15]}});function ee(){var e=$(),t=Object(r.useContext)(w),n=t.user,c=t.removeUser;return Object(a.jsx)("div",{className:e.wrapper,children:Object(a.jsxs)(q.a,{className:"justify-content-between",expand:"lg",children:[Object(a.jsx)(q.a.Brand,{href:"/",children:"Chocolate Fiesta Cloud \u03b2"}),Object(a.jsx)(q.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(q.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(B.a,{className:"mr-auto",children:[Object(a.jsx)(B.a.Link,{href:"/library",children:"Models Library"}),Object(a.jsx)(B.a.Link,{href:"/draw-print",children:"Drawing Print"}),Object(a.jsx)(B.a.Link,{href:"/stl-generator",children:"3D Text Generator"})]}),Object(a.jsxs)(B.a,{className:"ml-auto",children:[Object(a.jsxs)(B.a.Link,{disabled:!0,children:["You are logged in as ",n.user.email]}),Object(a.jsx)(B.a.Link,{onClick:c,children:"Log out"})]})]})]})})}n(171);function te(){return Object(a.jsx)("div",{className:"dash-wrapper",children:Object(a.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e Chocolate Fiesta Cloud"})})}var ne=c.a.createContext(),ae=function(e){var t=e.children,n=Object(r.useState)(!1),c=Object(b.a)(n,2),s=c[0],i=c[1],l=Object(r.useState)(!1),o=Object(b.a)(l,2),j=o[0],u=o[1],d=Object(r.useRef)(null),h=Object(r.useRef)(null),O=Object(r.useState)([]),x=Object(b.a)(O,2),f=x[0],m=x[1],p=Object(r.useState)([]),g=Object(b.a)(p,2),v=g[0],C=g[1],y=Object(r.useState)([]),w=Object(b.a)(y,2),S=w[0],L=w[1],N=function(e){if(console.log(e.type),"mousemove"===e.type||"mousedown"===e.type)return{offsetX:e.offsetX,offsetY:e.offsetY};if("touchstart"===e.type||"touchmove"===e.type){var t=e.target.getBoundingClientRect();return{offsetX:e.touches[0].pageX-t.left,offsetY:e.touches[0].pageY-t.top}}};return Object(a.jsx)(ne.Provider,{value:{canvasRef:d,contextRef:h,x:f,y:v,stops:S,isPrepared:s,prepareCanvas:function(){if(!s){var e=d.current,t=Math.min(window.innerWidth,window.innerHeight-128);e.width=2*t,e.height=2*t,e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px");var n=e.getContext("2d");n.scale(2,2),n.lineCap="round",n.strokeStyle="brown",n.lineWidth=14,h.current=n,i(!0)}},startDrawing:function(e){var t=e.nativeEvent,n=N(t),a=n.offsetX,r=n.offsetY;h.current.beginPath(),h.current.moveTo(a,r),u(!0)},finishDrawing:function(){h.current.closePath(),u(!1),L([].concat(Object(I.a)(S),[f.length-1]))},clearCanvas:function(){var e=d.current,t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),m([]),C([]),L([])},draw:function(e){var t=e.nativeEvent;if(j){var n=N(t),a=n.offsetX,r=n.offsetY;h.current.lineTo(a,r),h.current.stroke(),m([].concat(Object(I.a)(f),[a])),C([].concat(Object(I.a)(v),[r]))}}},children:t})},re=function(){return Object(r.useContext)(ne)};n(172);function ce(){var e=re(),t=e.canvasRef,n=e.prepareCanvas,c=e.startDrawing,s=e.finishDrawing,i=e.draw;return Object(r.useEffect)(n,[n]),Object(a.jsx)("canvas",{onMouseDown:c,onMouseUp:s,onMouseMove:i,onTouchStart:c,onTouchEnd:s,onTouchMove:i,ref:t})}n(109);function se(){var e=Object(r.useContext)(w).user,t=re(),n=t.x,c=t.y,s=t.stops,i=Object(r.useState)(!1),l=Object(b.a)(i,2),o=l[0],j=l[1];function u(){return(t=e.user.uid,f.collection("user-drawing").doc(t)).set({x:n,y:c,stops:s});var t}function d(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),c=t[0],s=t[1];Object(r.useEffect)((function(){c&&u().then((function(){s(!1),j(!0)}))}),[c]);return Object(a.jsx)(g.a,{disabled:c||o||0===n.length,className:"control-button",size:"lg",variant:"success",onClick:c?null:function(){s(!0)},children:c?"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":o?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u0435\u0447\u0430\u0442\u044c"})}return Object(r.useEffect)((function(){j(!1)}),[n]),Object(a.jsx)(d,{})}function ie(){var e=re(),t=e.x,n=e.clearCanvas;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"controls-wrapper",children:Object(a.jsx)(q.a,{fixed:"bottom",bg:"dark",className:"justify-content-center",children:Object(a.jsxs)(B.a,{children:[Object(a.jsx)(g.a,{onClick:n,disabled:0===t.length,className:"control-button",size:"lg",variant:"light",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(a.jsx)(se,{})]})})})})}var le=n(145);n(217);function oe(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(q.a,{bg:"dark",variant:"dark",className:"justify-content-center",children:[Object(a.jsx)(q.a.Brand,{href:"/",children:"Chocolate Fiesta Draw"}),Object(a.jsx)(q.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsx)(B.a,{className:"ml-auto",children:Object(a.jsx)(B.a.Link,{href:"/draw-print",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u0435\u0447\u0430\u0442\u0438"})})})]})})})}var je=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"draw-app-wrapper",children:Object(a.jsx)(le.a,Object(y.a)(Object(y.a)({},O),{},{firebase:h.a,children:Object(a.jsxs)(ae,{children:[Object(a.jsx)(oe,{}),Object(a.jsx)(ce,{}),Object(a.jsx)(ie,{})]})}))})})};function ue(e){var t=e.updateSTL,n=e.setStlSettings,r=[{value:"Pacifico",title:"Pacifico"},{value:"Liberation Sans:style=Bold",title:"Sans Bold"},{value:"Liberation Serif:style=Bold",title:"Serif Bold"}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(p.a,{children:[Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Text"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"text",defaultValue:"Chocolate Fiesta",onChange:function(e){return n({text:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Heigth, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"5",onChange:function(e){return n({depth:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Width, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"100",onChange:function(e){return n({width:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Heigth of foundation, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"10",defaultValue:"2",onChange:function(e){return n({foundation_depth:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Width of foundation, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"0.1",defaultValue:"2",onChange:function(e){return n({foundation_offset:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Word merger foundation width, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",step:"1",defaultValue:"7",onChange:function(e){return n({foundation_joiner_height:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Letter spacing, mm"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",type:"number",defaultValue:"1.0",onChange:function(e){return n({text_spacing:e.target.value})}})})]}),Object(a.jsxs)(p.a.Group,{as:L.a,children:[Object(a.jsx)(p.a.Label,{column:!0,children:"Font"}),Object(a.jsx)(N.a,{children:Object(a.jsx)(p.a.Control,{size:"sm",as:"select",defaultValue:r[0].value,onChange:function(e){return n({font:e.target.value})},children:r.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.title})}))})})]})]}),Object(a.jsx)(g.a,{onClick:function(){return t()},children:"Generate"})]})}n(114);var de=n(141);function be(e){return Object(r.useEffect)((function(){}),[e.stlUrl,e.fetchStlError]),e.fetchStlError?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(M.a,{variant:"danger",children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0438, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430."})}):""===e.stlUrl?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(M.a,{variant:"primary",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043c\u043e\u0434\u0435\u043b\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e 1 \u043c\u0438\u043d\u0443\u0442\u044b."}),Object(a.jsx)(F.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(de.ModelViewer,{width:"100%",aspectgRatio:"100%",rotationSpeeds:[0,0,0],initControlPosition:[0,0,.4],backgroundColor:"#ffffff",url:e.stlUrl})})}function he(e,t){return Object(y.a)(Object(y.a)({},e),t)}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return fetch(e,t).then((function(a){if(a.ok)return a.json();if(n>0)return Oe(e,t,n-1);throw new Error(a)})).catch((function(a){if(n>0)return Oe(e,t,n-1);throw new Error(a)}))}function xe(){var e=Object(r.useContext)(w).user.user.uid,t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],s=n[1],i=Object(r.useReducer)(he,{}),l=Object(b.a)(i,2),o=l[0],j=l[1],u=Object(r.useState)(!1),d=Object(b.a)(u,2),h=d[0],O=d[1];function x(e,t){return s(""),O(!1),Oe(E+"/api/stl-generator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){e?s(e.url):(O(!0),G.a(new Error(e)))})).catch((function(e){O(!0),G.a(new Error(e))}))}return Object(r.useEffect)((function(){var e=!0;return x(0,{}).then((function(t){e&&null!=t&&s(t.url)})),function(){return e=!1}}),[e]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(S.a,{fluid:"xl",className:"stl-generator-wrapper",children:[Object(a.jsxs)(L.a,{children:[Object(a.jsx)(N.a,{sm:7,children:Object(a.jsx)(be,{fetchStlError:h,stlUrl:c})}),Object(a.jsx)(N.a,{sm:5,children:Object(a.jsx)(ue,{updateSTL:function(){x(0,o)},setStlSettings:j})})]}),Object(a.jsx)(L.a,{children:Object(a.jsxs)(N.a,{children:[Object(a.jsx)(g.a,{as:"a",target:"_blank",href:c,className:"control-button",size:"lg",variant:"primary",download:!0,children:"Download STL"}),Object(a.jsx)(g.a,{disabled:!0,className:"control-button",size:"lg",variant:"primary",children:"Send to printer"})]})})]})})}var fe=function(){var e=function(){var e=Object(r.useState)(function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null}()),t=Object(b.a)(e,2),n=t[0],a=t[1],c=function(e){localStorage.setItem("user",JSON.stringify(e)),a(e)};return{setUser:c,user:n,removeUser:function(){c(null)}}}(),t=e.user,n=e.setUser,c=e.removeUser;return t?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(w.Provider,{value:{user:t,setUser:n,removeUser:c},children:Object(a.jsx)(l.a,{children:Object(a.jsxs)(o.c,{children:[Object(a.jsx)(o.a,{exact:!0,path:"/draw",children:Object(a.jsx)(je,{})}),Object(a.jsxs)(o.a,{path:"/",children:[Object(a.jsx)(ee,{}),Object(a.jsx)(o.a,{exact:!0,path:"/",children:Object(a.jsx)(V,{})}),Object(a.jsx)(o.a,{path:"/draw-print",children:Object(a.jsx)(V,{})}),Object(a.jsx)(o.a,{path:"/library",children:Object(a.jsx)(Z,{})}),Object(a.jsx)(o.a,{path:"/slicer",children:Object(a.jsx)(te,{})}),Object(a.jsx)(o.a,{path:"/stl-generator",children:Object(a.jsx)(xe,{})})]})]})})})}):Object(a.jsx)(C,{setUser:n})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,264)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},pe=(n(248),n(259)),ge=n(143);pe.a({dsn:"https://671da45dc307486090d441b0ff074028@o528559.ingest.sentry.io/5646853",integrations:[new ge.a.BrowserTracing],tracesSampleRate:1}),i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(fe,{})}),document.getElementById("root")),me()}},[[249,1,2]]]);
//# sourceMappingURL=main.60be5ee6.chunk.js.map